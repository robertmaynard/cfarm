<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Cfarm by robertmaynard</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Cfarm</h1>
        <h2>Making cross-platform development faster.</h2>
        <a href="https://github.com/robertmaynard/cfarm" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a name="cfarm" class="anchor" href="#cfarm"><span class="octicon octicon-link"></span></a>CFarm</h3>

<p>CFarm goal is to keep numerous machines in sync when developing cross platform
C++ projects. You can think of a private continuous testing, without any fancy
reporting, user interface, or other 'features' that other tools have.</p>

<h2>
<a name="reason" class="anchor" href="#reason"><span class="octicon octicon-link"></span></a>Reason</h2>

<p>The standard problem I have is when developing on a single platform,
I introduce subtle cross platform breaking code, things like using
c99 types, or using a C++11 method from stl.</p>

<p>Now I can commit these breaks, and send the branch for review where
it will get sniffed out and reported, but the turnaround for that is
incredibly high.</p>

<p>Likewise I generally switch between machines to replicate these breaks,
and every time I do that I need to recheck out the code and generally go
through the entire configuration, compilation, test process.</p>

<h2>
<a name="setup-development-machine" class="anchor" href="#setup-development-machine"><span class="octicon octicon-link"></span></a>Setup Development Machine</h2>

<p>To use cfarm you need a setup a configuration per project. This is
done by creating a .cfarm folder in the root of your git repo that
you want cfarm to work on (Yes cfarm only supports git, I said cfarm
has no features).</p>

<p>The folder will look something like:</p>

<pre><code>.cfarm/
  - metaverse.cdep
  - deliverator.cdep
  - bigboard.cdep
</code></pre>

<p>Each .cdep file will describe how to deploy the project to a machine.
Each file name is the cfarm workers name, allowing you to have multiple workers
that point to the same physical machine. Here is an example .cdep file:</p>

<pre><code>{
"hostname" : "bigboard",
"user" : "hiro",
"src_location" : "/home/hiro/Work/bigboard/src",
"build_location" : "/home/hiro/Work/bigboard/build",
"build_generator" : "Ninja",
"build_flags" : "-j8"
}
</code></pre>

<p>Here is a list of required settings for a .cdep file:</p>

<ul>
<li>hostname = computer name, or ip address of worker</li>
<li>user = the user we are going to log in as</li>
<li>src_location = the location to store the source for the current project</li>
<li>build_location = the location to build the project</li>
<li>build_generator = the cmake generator to use for building ( Make, Ninja, MSVC, ...)
                Currently MSVC is not recommend since you will have to manually
                specify the configuration type ( Debug, Release, ...) at each build</li>
</ul><p>Here is a list of optional settings for a .cdep file:</p>

<ul>
<li>build_flags = list of flags for compilation, generally holds -j</li>
</ul><h2>
<a name="how-to-use-cfarm" class="anchor" href="#how-to-use-cfarm"><span class="octicon octicon-link"></span></a>How to use cfarm</h2>

<p>cfarm understands the concepts of setup, build, and test.</p>

<p>The Setup command looks like:</p>

<pre><code>cfarm setup metaverse
</code></pre>

<p>As it only supports setting up machines one by one. This is required as we
currently launch ccmake on the machine to allow you to configure the starting
building options. Todo: Allow the user to resetup a machine to switch just
configure options</p>

<p>The build and test command have two ways to be called:</p>

<pre><code> cfarm build all
 cfarm build deliverator

 cfarm test all
 cfarm test bigboard metaverse
</code></pre>

<p>cfarm also allows you to sent options down to the workers at build
and test time, it does this by sending all arguments passed after the
first '--' down to the command line.</p>

<p>So to specify a specific target for all workers to build you would use the
following command line:</p>

<pre><code>cfarm build all -- --target Sword
</code></pre>

<p>To specify to run tests that match a ctest regular expression you would
use:</p>

<pre><code>cfarm test all -- -R UnitTestSword
</code></pre>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<pre><code>Python 2.6 or 2.7
Fabric
</code></pre>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/robertmaynard/cfarm/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/robertmaynard/cfarm/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/robertmaynard/cfarm"></a> is maintained by <a href="https://github.com/robertmaynard">robertmaynard</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>